-- FleischPanel Lite (com Auto-Kick + Extras)
-- Seguro: sem wallhack/ESP, sem destruição de objetos, sem remotes contra outros players.
-- Recursos:
--  - Tecla K: auto-kick com mensagem
--  - Botão "Kick (K)" no header
--  - Lista de jogadores + foco de câmera (client-side)
--  - Reentrar (mesmo place)
--  - Visual Simples (Lighting/Terrain locais)
--  - Reset Câmera
--  - FPS / Ping (Stats) no header
--  - Tema Claro/Escuro (toggle)
--  - Copiar nome do jogador (TextBox selecionável + instrução para Ctrl+C)

-- ============ SERVICES ============
local Players            = game:GetService("Players")
local RunService         = game:GetService("RunService")
local UserInputService   = game:GetService("UserInputService")
local TeleportService    = game:GetService("TeleportService")
local Lighting           = game:GetService("Lighting")
local TweenService       = game:GetService("TweenService")
local Stats              = game:GetService("Stats")

local LocalPlayer        = Players.LocalPlayer
local playerGui          = LocalPlayer:WaitForChild("PlayerGui")

-- ============ THEME ============
local theme = "dark"
local palette = {
    dark = {
        BG = Color3.fromRGB(14, 17, 22),
        Stroke = Color3.fromRGB(70, 70, 100),
        Text = Color3.fromRGB(255, 255, 255),
        AccentBtn = Color3.fromRGB(24, 28, 36),
        AccentRed = Color3.fromRGB(170, 35, 45),
        AccentRedD = Color3.fromRGB(90, 20, 25),
        ScrollBar = Color3.fromRGB(100, 100, 120),
        ToastBG = Color3.fromRGB(20, 24, 31),
    },
    light = {
        BG = Color3.fromRGB(240, 242, 247),
        Stroke = Color3.fromRGB(170, 170, 190),
        Text = Color3.fromRGB(20, 20, 25),
        AccentBtn = Color3.fromRGB(225, 229, 238),
        AccentRed = Color3.fromRGB(210, 60, 70),
        AccentRedD = Color3.fromRGB(160, 40, 50),
        ScrollBar = Color3.fromRGB(140, 140, 170),
        ToastBG = Color3.fromRGB(235, 238, 245),
    }
}
local function C(k) return palette[theme][k] end

-- ============ SELF-KICK ============
local ENABLE_SELF_KICK   = true
local SELF_KICK_KEY      = Enum.KeyCode.K
local SELF_KICK_MESSAGE  = "Você foi removido pelo sistema de moderação.\n(Code: 268)"

-- ============ CLEANUP UI ============
if playerGui:FindFirstChild("CmdUI") then
    playerGui.CmdUI:Destroy()
end

-- ============ ROOT UI ============
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CmdUI"
screenGui.ResetOnSpawn = false
screenGui.DisplayOrder = 999
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 360)
frame.Position = UDim2.new(1, -320, 0.5, -180)
frame.BackgroundColor3 = C("BG")
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui
local frameCorner = Instance.new("UICorner"); frameCorner.CornerRadius = UDim.new(0, 14); frameCorner.Parent = frame
local frameStroke = Instance.new("UIStroke"); frameStroke.Thickness = 1; frameStroke.Color = C("Stroke"); frameStroke.Transparency = 0.3; frameStroke.Parent = frame

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 44)
header.BackgroundColor3 = C("BG")
header.BorderSizePixel = 0
header.Parent = frame
local headerCorner = Instance.new("UICorner"); headerCorner.CornerRadius = UDim.new(0, 14); headerCorner.Parent = header

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -120, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "FleischPanel Lite"
title.TextColor3 = C("Text")
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

-- FPS / Ping labels
local infoHolder = Instance.new("Frame")
infoHolder.Size = UDim2.new(0, 120, 1, 0)
infoHolder.Position = UDim2.new(1, -120, 0, 0)
infoHolder.BackgroundTransparency = 1
infoHolder.Parent = header

local fpsLabel = Instance.new("TextLabel")
fpsLabel.Size = UDim2.new(1, 0, 0.5, 0)
fpsLabel.Position = UDim2.new(0, 0, 0, 0)
fpsLabel.BackgroundTransparency = 1
fpsLabel.Text = "FPS: --"
fpsLabel.TextColor3 = C("Text")
fpsLabel.Font = Enum.Font.GothamBold
fpsLabel.TextSize = 13
fpsLabel.TextXAlignment = Enum.TextXAlignment.Right
fpsLabel.Parent = infoHolder

local pingLabel = Instance.new("TextLabel")
pingLabel.Size = UDim2.new(1, 0, 0.5, 0)
pingLabel.Position = UDim2.new(0, 0, 0.5, 0)
pingLabel.BackgroundTransparency = 1
pingLabel.Text = "Ping: -- ms"
pingLabel.TextColor3 = C("Text")
pingLabel.Font = Enum.Font.Gotham
pingLabel.TextSize = 13
pingLabel.TextXAlignment = Enum.TextXAlignment.Right
pingLabel.Parent = infoHolder

-- Minimizar com CTRL
local isMinimized = false
local function toggleMinimize()
    frame.Visible = not frame.Visible
    isMinimized = not isMinimized
end
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.LeftControl or input.KeyCode == Enum.KeyCode.RightControl then
        toggleMinimize()
    end
end)

-- ============ TOAST ============
local function quickToast(text)
    local gui = Instance.new("ScreenGui")
    gui.Name = "KickToast"
    gui.ResetOnSpawn = false
    gui.IgnoreGuiInset = true
    gui.Parent = playerGui

    local box = Instance.new("Frame")
    box.Size = UDim2.new(0, 420, 0, 70)
    box.Position = UDim2.new(0.5, -210, 0.4, 0)
    box.BackgroundColor3 = C("ToastBG")
    box.BorderSizePixel = 0
    box.Parent = gui

    local corner = Instance.new("UICorner"); corner.CornerRadius = UDim.new(0, 12); corner.Parent = box
    local stroke = Instance.new("UIStroke"); stroke.Thickness = 1; stroke.Color = C("Stroke"); stroke.Transparency = 0.3; stroke.Parent = box

    local lbl = Instance.new("TextLabel")
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, -20, 1, -20)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Text = text
    lbl.TextColor3 = C("Text")
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = 18
    lbl.TextWrapped = true
    lbl.Parent = box

    task.delay(1.1, function() if gui then gui:Destroy() end end)
end

-- ============ AUTO-KICK ============
local function doSelfKick()
    if not ENABLE_SELF_KICK then return end
    quickToast("Saindo rapidamente... (K)")
    task.wait(0.1)
    pcall(function()
        LocalPlayer:Kick(SELF_KICK_MESSAGE)
    end)
end
-- Hotkey K
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == SELF_KICK_KEY then
        doSelfKick()
    end
end)

-- Botão Kick no header
local kickBtn = Instance.new("TextButton")
kickBtn.Size = UDim2.new(0, 90, 0, 26)
kickBtn.Position = UDim2.new(1, -100, 0, 8)
kickBtn.BackgroundColor3 = C("AccentRed")
kickBtn.TextColor3 = C("Text")
kickBtn.Font = Enum.Font.GothamBold
kickBtn.TextSize = 14
kickBtn.Text = "Kick (K)"
kickBtn.AutoButtonColor = true
kickBtn.Parent = header
local kickCorner = Instance.new("UICorner"); kickCorner.CornerRadius = UDim.new(0, 8); kickCorner.Parent = kickBtn
local kickStroke = Instance.new("UIStroke"); kickStroke.Thickness = 1; kickStroke.Color = C("AccentRedD"); kickStroke.Transparency = 0.3; kickStroke.Parent = kickBtn
kickBtn.MouseButton1Click:Connect(doSelfKick)

-- ============ BODY: SELETOR E LISTA ============
-- Seletor + copiar nome
local selectorFrame = Instance.new("Frame")
selectorFrame.Size = UDim2.new(1, -20, 0, 40)
selectorFrame.Position = UDim2.new(0, 10, 0, 52)
selectorFrame.BackgroundColor3 = C("BG")
selectorFrame.BorderSizePixel = 0
selectorFrame.Parent = frame
local selectorCorner = Instance.new("UICorner"); selectorCorner.CornerRadius = UDim.new(0, 10); selectorCorner.Parent = selectorFrame
local selectorStroke = Instance.new("UIStroke"); selectorStroke.Thickness = 1; selectorStroke.Color = C("Stroke"); selectorStroke.Transparency = 0.4; selectorStroke.Parent = selectorFrame

local selectedNameBox = Instance.new("TextBox")
selectedNameBox.Size = UDim2.new(1, -120, 1, 0)
selectedNameBox.Position = UDim2.new(0, 10, 0, 0)
selectedNameBox.BackgroundTransparency = 1
selectedNameBox.TextEditable = false
selectedNameBox.Text = ""
selectedNameBox.TextColor3 = C("Text")
selectedNameBox.Font = Enum.Font.Gotham
selectedNameBox.TextSize = 14
selectedNameBox.TextXAlignment = Enum.TextXAlignment.Left
selectedNameBox.ClearTextOnFocus = false
selectedNameBox.Parent = selectorFrame

local copyBtn = Instance.new("TextButton")
copyBtn.Size = UDim2.new(0, 100, 0, 26)
copyBtn.Position = UDim2.new(1, -110, 0, 7)
copyBtn.BackgroundColor3 = C("AccentBtn")
copyBtn.TextColor3 = C("Text")
copyBtn.Font = Enum.Font.GothamBold
copyBtn.TextSize = 13
copyBtn.Text = "Copiar nome"
copyBtn.AutoButtonColor = true
copyBtn.Parent = selectorFrame
local copyCorner = Instance.new("UICorner"); copyCorner.CornerRadius = UDim.new(0, 8); copyCorner.Parent = copyBtn
local copyStroke = Instance.new("UIStroke"); copyStroke.Thickness = 1; copyStroke.Color = C("Stroke"); copyStroke.Transparency = 0.4; copyStroke.Parent = copyBtn

copyBtn.MouseButton1Click:Connect(function()
    if selectedNameBox.Text == "" then
        quickToast("Selecione um jogador na lista.")
        return
    end
    selectedNameBox:CaptureFocus()
    selectedNameBox.CursorPosition = #selectedNameBox.Text + 1
    selectedNameBox.SelectionStart = 1
    selectedNameBox.SelectionLength = #selectedNameBox.Text
    quickToast("Nome selecionado. Pressione Ctrl+C para copiar.")
end)

-- Lista de jogadores
local scrolling = Instance.new("ScrollingFrame")
scrolling.Size = UDim2.new(1, -20, 1, -152)
scrolling.Position = UDim2.new(0, 10, 0, 98)
scrolling.BackgroundColor3 = C("BG")
scrolling.BorderSizePixel = 0
scrolling.ScrollBarThickness = 8
scrolling.ScrollBarImageColor3 = C("ScrollBar")
scrolling.CanvasSize = UDim2.new(0, 0, 0, 0)
scrolling.AutomaticCanvasSize = Enum.AutomaticSize.Y
scrolling.Parent = frame
local scrollCorner = Instance.new("UICorner"); scrollCorner.CornerRadius = UDim.new(0, 10); scrollCorner.Parent = scrolling
local listLayout = Instance.new("UIListLayout"); listLayout.Parent = scrolling; listLayout.Padding = UDim.new(0, 8); listLayout.SortOrder = Enum.SortOrder.LayoutOrder
local padding = Instance.new("UIPadding"); padding.PaddingTop = UDim.new(0, 8); padding.PaddingBottom = UDim.new(0, 8); padding.PaddingLeft = UDim.new(0, 8); padding.PaddingRight = UDim.new(0, 8); padding.Parent = scrolling

local function criarBotaoJogador(playerObj)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -16, 0, 40)
    btn.BackgroundColor3 = C("BG")
    btn.Text = ""
    btn.BorderSizePixel = 0
    btn.AutoButtonColor = false
    btn.Parent = scrolling

    local cornerBtn = Instance.new("UICorner"); cornerBtn.CornerRadius = UDim.new(0, 10); cornerBtn.Parent = btn
    local btnStroke = Instance.new("UIStroke"); btnStroke.Thickness = 1; btnStroke.Color = C("Stroke"); btnStroke.Transparency = 0.4; btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border; btnStroke.Parent = btn

    local nameLbl = Instance.new("TextLabel")
    nameLbl.Size = UDim2.new(1, -50, 1, 0)
    nameLbl.Position = UDim2.new(0, 10, 0, 0)
    nameLbl.BackgroundTransparency = 1
    nameLbl.Text = playerObj.Name
    nameLbl.TextColor3 = C("Text")
    nameLbl.Font = Enum.Font.GothamBold
    nameLbl.TextSize = 14
    nameLbl.TextXAlignment = Enum.TextXAlignment.Left
    nameLbl.Parent = btn

    local hoverTween = TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), { BackgroundColor3 = C("AccentBtn") })
    local unhoverTween = TweenService:Create(btn, TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), { BackgroundColor3 = C("BG") })

    btn.MouseEnter:Connect(function() hoverTween:Play() end)
    btn.MouseLeave:Connect(function() unhoverTween:Play() end)

    btn.MouseButton1Click:Connect(function()
        selectedNameBox.Text = playerObj.Name
        local cam = workspace.CurrentCamera
        if playerObj.Character and playerObj.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = playerObj.Character.HumanoidRootPart
            cam.CameraType = Enum.CameraType.Custom
            cam:Interpolate(CFrame.new(hrp.Position + Vector3.new(0, 10, 12)), CFrame.new(hrp.Position), 0.25)
            quickToast("Selecionado: " .. playerObj.Name)
        else
            quickToast("Jogador sem personagem no momento.")
        end
    end)
end

local function atualizarLista()
    for _, child in ipairs(scrolling:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then criarBotaoJogador(p) end
    end
end

Players.PlayerAdded:Connect(function(p)
    if p ~= LocalPlayer then criarBotaoJogador(p) end
end)
Players.PlayerRemoving:Connect(function() task.defer(atualizarLista) end)
task.spawn(function()
    while screenGui.Parent do
        atualizarLista()
        task.wait(2)
    end
end)
atualizarLista()

-- ============ FOOTER: CONTROLES ============
local footer = Instance.new("Frame")
footer.Size = UDim2.new(1, -20, 0, 44)
footer.Position = UDim2.new(0, 10, 1, -54)
footer.BackgroundColor3 = C("BG")
footer.BorderSizePixel = 0
footer.Parent = frame
local footerCorner = Instance.new("UICorner"); footerCorner.CornerRadius = UDim.new(0, 10); footerCorner.Parent = footer
local footerLayout = Instance.new("UIListLayout"); footerLayout.FillDirection = Enum.FillDirection.Horizontal; footerLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center; footerLayout.VerticalAlignment = Enum.VerticalAlignment.Center; footerLayout.Padding = UDim.new(0, 8); footerLayout.Parent = footer

local function makeSmallButton(text, onClick, color, strokeColor)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0, 120, 0, 30)
    b.BackgroundColor3 = color or C("AccentBtn")
    b.TextColor3 = C("Text")
    b.Font = Enum.Font.GothamBold
    b.TextSize = 13
    b.Text = text
    b.AutoButtonColor = true
    local c = Instance.new("UICorner"); c.CornerRadius = UDim.new(0, 8); c.Parent = b
    local s = Instance.new("UIStroke"); s.Thickness = 1; s.Color = strokeColor or C("Stroke"); s.Transparency = 0.4; s.Parent = b
    b.MouseButton1Click:Connect(function() pcall(onClick) end)
    return b
end

-- Reentrar
local rejoinBtn = makeSmallButton("Reentrar", function()
    quickToast("Reentrando...")
    TeleportService:Teleport(game.PlaceId, LocalPlayer)
end)
rejoinBtn.Parent = footer

-- Visual Simples
local visualBtn = makeSmallButton("Visual Simples", function()
    pcall(function()
        Lighting.GlobalShadows = false
        Lighting.ShadowSoftness = 0
        Lighting.Brightness = 1
        Lighting.Ambient = Color3.fromRGB(127,127,127)
        Lighting.OutdoorAmbient = Color3.fromRGB(127,127,127)
        Lighting.FogEnd = 1e6
        Lighting.FogStart = 0
        Lighting.FogColor = Color3.fromRGB(127,127,127)
    end)
    local Terrain = workspace:FindFirstChildOfClass("Terrain")
    if Terrain then
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterColor = Color3.fromRGB(0,0,0)
    end
    quickToast("Visual simplificado aplicado.")
end)
visualBtn.Parent = footer

-- Reset Câmera
local camBtn = makeSmallButton("Reset Câmera", function()
    local cam = workspace.CurrentCamera
    cam.CameraType = Enum.CameraType.Custom
    quickToast("Câmera resetada.")
end)
camBtn.Parent = footer

-- Tema Claro/Escuro
local themeBtn = makeSmallButton("Tema: Escuro", function()
    theme = (theme == "dark") and "light" or "dark"
    themeBtn.Text = "Tema: " .. ((theme == "dark") and "Escuro" or "Claro")

    -- Reaplicar cores
    frame.BackgroundColor3 = C("BG"); frameStroke.Color = C("Stroke")
    header.BackgroundColor3 = C("BG")
    title.TextColor3 = C("Text")
    fpsLabel.TextColor3 = C("Text"); pingLabel.TextColor3 = C("Text")
    kickBtn.BackgroundColor3 = C("AccentRed"); kickStroke.Color = C("AccentRedD"); kickBtn.TextColor3 = C("Text")

    selectorFrame.BackgroundColor3 = C("BG"); selectorStroke.Color = C("Stroke"); selectedNameBox.TextColor3 = C("Text")
    copyBtn.BackgroundColor3 = C("AccentBtn"); copyStroke.Color = C("Stroke"); copyBtn.TextColor3 = C("Text")

    scrolling.BackgroundColor3 = C("BG"); scrollCorner.Parent = scrolling
    scrolling.ScrollBarImageColor3 = C("ScrollBar")

    footer.BackgroundColor3 = C("BG")

    quickToast("Tema aplicado: " .. ((theme == "dark") and "Escuro" or "Claro"))
end)
themeBtn.Parent = footer

-- ============ FPS & PING ============
do
    local frames = 0
    local last = os.clock()
    RunService.RenderStepped:Connect(function()
        frames += 1
        local now = os.clock()
        if now - last >= 1 then
            fpsLabel.Text = ("FPS: %d"):format(frames)
            frames = 0
            last = now

            -- Ping (ms) via Stats (pode variar conforme plataforma)
            local pingVal
            pcall(function()
                local pingItem = Stats and Stats.Network and Stats.Network.ServerStatsItem and Stats.Network.ServerStatsItem["Data Ping"]
                if pingItem and pingItem.GetValue then
                    pingVal = math.floor(pingItem:GetValue())
                end
            end)
            if pingVal then
                pingLabel.Text = ("Ping: %d ms"):format(pingVal)
            else
                pingLabel.Text = "Ping: -- ms"
            end
        end
    end)
end

-- ============ LOG ============
print(("="):rep(52))
print("✓ FLEISCHPANEL LITE ATIVADO (com extras)")
print("🔑 AUTO-KICK: tecla K + botão Kick (K)")
print("📋 COPIAR NOME: via TextBox selecionável (Ctrl+C)")
print("📈 FPS + Ping no header | 🎨 Tema Claro/Escuro")
print("🔁 Reentrar | 🌙 Visual Simples | 🎥 Reset Câmera")
print(("="):rep(52))
